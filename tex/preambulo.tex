\usepackage[papersize={6in,9in},top=0.75in,bottom=0.75in,inner=0.9in,outer=0.7in]{geometry}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{lmodern}

\usepackage{microtype}
\usepackage{graphicx}
\graphicspath{{img/}}

\usepackage[hidelinks]{hyperref}
\usepackage{bookmark}

% === Bibliografía (opcional) ===
% Activa en \LibroTexDir/metadatos.tex: \newcommand{\LibroUsarBibliografia}{1}
% Crea tu fichero: \LibroTexDir/referencias.bib
\ifnum\LibroUsarBibliografia=1\relax
  \IfFileExists{\LibroTexDir/referencias.bib}{%
    \usepackage{csquotes}
    \usepackage[backend=biber,style=authoryear,sorting=nyt]{biblatex}
    \addbibresource{\LibroTexDir/referencias.bib}
    \DefineBibliographyStrings{spanish}{bibliography={Bibliografía}}
  }{%
    \typeout{milibro: \string\\LibroUsarBibliografia=1 pero falta \LibroTexDir/referencias.bib}%
  }%
\fi

% === Índice analítico (opcional) ===
% Activa en \LibroTexDir/metadatos.tex: \newcommand{\LibroUsarIndiceAnalitico}{1}
\ifnum\LibroUsarIndiceAnalitico=1\relax
  \usepackage{makeidx}
  \makeindex
\fi

% Ajustes típicos para libro (KDP/impresión): sangría, sin espacio extra entre párrafos.
\setlength{\parindent}{1.25em}
\setlength{\parskip}{0pt}
\raggedbottom

% TOC más “amigable” para eBook.
\renewcommand{\contentsname}{Contenido}
\setcounter{tocdepth}{2}

% Utilidad: comprobar si un campo está vacío (robusto con \newcommand).
\newcommand{\milibroIfBlankTF}[3]{%
  \begingroup
  \edef\milibroTmp{#1}%
  \if\relax\detokenize\expandafter{\milibroTmp}\relax
    \endgroup #2%
  \else
    \endgroup #3%
  \fi
}

% Inclusión de capítulos con soporte de "solo estos capítulos".
% Si defines \IncludeOnlyList (separado por comas), solo se compilan esos.
% Ejemplo: \def\IncludeOnlyList{capitulo2,capitulo3}
\makeatletter
\newcommand{\milibroChapter}[1]{%
  \ifdefined\IncludeOnlyList
    \milibroIfBlankTF{\IncludeOnlyList}{%
      \input{\LibroTexDir/#1}%
    }{%
      \def\milibro@wanted{0}%
      \edef\milibro@name{#1}%
      \@for\milibro@item:=\IncludeOnlyList\do{%
        \edef\milibro@item{\milibro@item}%
        \ifx\milibro@item\milibro@name
          \def\milibro@wanted{1}%
        \fi
      }%
      \ifnum\milibro@wanted=1\relax
        \input{\LibroTexDir/#1}%
      \fi
    }%
  \else
    \input{\LibroTexDir/#1}%
  \fi
}
\makeatother
